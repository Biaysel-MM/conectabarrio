<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pedido Confirmado - ConectaBarrio</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        /* ESTILOS ESPEC√çFICOS PARA ORDER CONFIRMED */
        :root {
            --primary: #2E86AB;
            --secondary: #A23B72;
            --accent: #F18F01;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --light: #f8f9fa;
            --dark: #343a40;
            --gray: #6c757d;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background-color: #f8f9fa;
        }

        /* MAIN CONTENT */
        .order-confirmed-page {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem 5%;
        }

        /* SUCCESS HEADER */
        .success-header {
            text-align: center;
            background: white;
            border-radius: 16px;
            padding: 3rem 2rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .success-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .success-title {
            font-size: 2.5rem;
            color: var(--success);
            margin-bottom: 1rem;
        }

        .success-subtitle {
            font-size: 1.2rem;
            color: var(--gray);
            margin-bottom: 2rem;
        }

        .order-number {
            background: var(--light);
            padding: 1rem 2rem;
            border-radius: 12px;
            display: inline-block;
            margin-bottom: 2rem;
        }

        .order-id {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: var(--dark);
            font-size: 1.3rem;
        }

        /* ORDER SUMMARY */
        .order-summary {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--light);
        }

        .section-header h2 {
            color: var(--dark);
            font-size: 1.5rem;
        }

        .commerce-card {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.5rem;
            background: var(--light);
            border-radius: 12px;
            margin-bottom: 1.5rem;
        }

        .commerce-avatar {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            object-fit: cover;
        }

        .commerce-info h4 {
            color: var(--dark);
            margin-bottom: 0.25rem;
        }

        .commerce-category {
            color: var(--primary);
            font-size: 0.9rem;
        }

        /* PRODUCTS LIST */
        .products-list {
            margin-bottom: 2rem;
        }

        .product-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-bottom: 1px solid var(--light);
        }

        .product-item:last-child {
            border-bottom: none;
        }

        .product-image {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
        }

        .product-details {
            flex: 1;
        }

        .product-name {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .product-price {
            color: var(--primary);
            font-weight: 600;
        }

        .product-quantity {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* ORDER DETAILS */
        .order-details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .detail-card {
            background: var(--light);
            border-radius: 12px;
            padding: 1.5rem;
        }

        .detail-card h3 {
            color: var(--dark);
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-label {
            color: var(--gray);
        }

        .detail-value {
            font-weight: 600;
            color: var(--dark);
        }

        .detail-total {
            font-size: 1.2rem;
            color: var(--primary);
        }

        /* DELIVERY TRACKING */
        .delivery-tracking {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .tracking-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin: 2rem 0;
        }

        .tracking-steps::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--light);
            z-index: 1;
        }

        .tracking-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
            flex: 1;
        }

        .step-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--light);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.5rem;
            border: 3px solid white;
        }

        .step-active .step-icon {
            background: var(--primary);
            color: white;
        }

        .step-completed .step-icon {
            background: var(--success);
            color: white;
        }

        .step-label {
            font-size: 0.8rem;
            text-align: center;
            color: var(--gray);
        }

        .step-active .step-label {
            color: var(--primary);
            font-weight: 600;
        }

        .step-completed .step-label {
            color: var(--success);
        }

        .estimated-time {
            text-align: center;
            background: rgba(40, 167, 69, 0.1);
            color: var(--success);
            padding: 1rem;
            border-radius: 12px;
            margin-top: 1rem;
        }

        /* ACTION BUTTONS */
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }

        .btn {
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            text-align: center;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: #1a6a8f;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        /* ORDER ACTIONS */
        .order-actions {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .action-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.75rem;
            padding: 1.5rem 1rem;
            border: 2px solid var(--light);
            border-radius: 12px;
            text-decoration: none;
            color: var(--dark);
            transition: all 0.3s;
            text-align: center;
        }

        .action-card:hover {
            border-color: var(--primary);
            background: rgba(46, 134, 171, 0.05);
            transform: translateY(-2px);
        }

        .action-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            background: rgba(46, 134, 171, 0.1);
            color: var(--primary);
        }

        .action-label {
            font-weight: 600;
            font-size: 0.9rem;
        }

        /* SUPPORT SECTION */
        .support-section {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-top: 2rem;
            text-align: center;
        }

        .support-options {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }

        .support-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem;
            border: 2px solid var(--light);
            border-radius: 12px;
            min-width: 150px;
        }

        .support-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        /* ANIMATIONS */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-in {
            animation: fadeInUp 0.6s ease;
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .mobile-menu-btn {
                display: block;
            }

            .order-confirmed-page {
                padding: 1rem;
            }

            .success-header {
                padding: 2rem 1rem;
            }

            .success-title {
                font-size: 2rem;
            }

            .order-details-grid {
                grid-template-columns: 1fr;
            }

            .tracking-steps {
                flex-direction: column;
                gap: 1rem;
            }

            .tracking-steps::before {
                display: none;
            }

            .tracking-step {
                flex-direction: row;
                gap: 1rem;
                text-align: left;
            }

            .step-icon {
                margin-bottom: 0;
            }

            .action-buttons {
                grid-template-columns: 1fr;
            }

            .quick-actions {
                grid-template-columns: repeat(2, 1fr);
            }

            .support-options {
                flex-direction: column;
                align-items: center;
            }
        }

        @media (max-width: 480px) {
            .commerce-card {
                flex-direction: column;
                text-align: center;
            }

            .product-item {
                flex-direction: column;
                text-align: center;
            }

            .quick-actions {
                grid-template-columns: 1fr;
            }

            .order-number {
                padding: 0.75rem 1rem;
            }

            .order-id {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <!-- NAVBAR -->
<!-- En el body de cada p√°gina -->
<div id="dynamic-navbar"></div>
<!-- El resto del contenido de tu p√°gina -->

    <!-- MAIN CONTENT -->
    <main class="order-confirmed-page">
        <!-- SUCCESS HEADER -->
        <section class="success-header animate-in">
            <div class="success-icon">üéâ</div>
            <h1 class="success-title">¬°Pedido Confirmado!</h1>
            <p class="success-subtitle">Tu pedido ha sido procesado exitosamente y est√° siendo preparado</p>
            
            <div class="order-number">
                <div>N√∫mero de Pedido</div>
                <div class="order-id">#CB-001234</div>
            </div>

            <div class="action-buttons">
                <button class="btn btn-primary" onclick="trackOrder()">
                    üì± Rastrear Pedido
                </button>
                <a href="../user/user-orders.html" class="btn btn-secondary">
                    üì¶ Ver Mis Pedidos
                </a>
                <a href="../commerce/commerce-list.html" class="btn btn-success">
                    üõí Seguir Comprando
                </a>
            </div>
        </section>

        <!-- ORDER SUMMARY -->
        <section class="order-summary animate-in">
            <div class="section-header">
                <h2>üìã Resumen del Pedido</h2>
                <div class="order-date">Realizado el 16 de Oct, 2024 - 14:30</div>
            </div>

            <!-- COMMERCE INFO -->
            <div class="commerce-card">
                <img src="../assets/colmado-miguel.jpg" alt="Colmado San Miguel" class="commerce-avatar">
                <div class="commerce-info">
                    <h4>Colmado San Miguel</h4>
                    <div class="commerce-category">üè™ Colmado</div>
                    <div>üìû (809) 123-4567 ‚Ä¢ üìç 0.8 km de ti</div>
                </div>
            </div>

            <!-- PRODUCTS LIST -->
            <div class="products-list">
                <div class="product-item">
                    <img src="../assets/arroz-blanco.jpg" alt="Arroz Blanco 5kg" class="product-image">
                    <div class="product-details">
                        <div class="product-name">Arroz Blanco 5kg</div>
                        <div class="product-price">$250 RD</div>
                    </div>
                    <div class="product-quantity">x1</div>
                </div>

                <div class="product-item">
                    <img src="../assets/aceite-de-soja.jpg" alt="Aceite de Soja 1L" class="product-image">
                    <div class="product-details">
                        <div class="product-name">Aceite de Soja 1L</div>
                        <div class="product-price">$180 RD</div>
                    </div>
                    <div class="product-quantity">x2</div>
                </div>

                <div class="product-item">
                    <img src="../assets/lehce.jpg" alt="Leche Entera 1L" class="product-image">
                    <div class="product-details">
                        <div class="product-name">Leche Entera 1L</div>
                        <div class="product-price">$85 RD</div>
                    </div>
                    <div class="product-quantity">x3</div>
                </div>
            </div>

            <!-- ORDER DETAILS -->
            <div class="order-details-grid">
                <div class="detail-card">
                    <h3>üì¶ Informaci√≥n de Entrega</h3>
                    <div class="detail-item">
                        <span class="detail-label">Direcci√≥n:</span>
                        <span class="detail-value">Calle Principal #123, Apt 4B</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Barrio:</span>
                        <span class="detail-value">Zona Colonial</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Instrucciones:</span>
                        <span class="detail-value">Timbre 2 veces</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Contacto:</span>
                        <span class="detail-value">Mar√≠a G. ‚Ä¢ (809) 555-0145</span>
                    </div>
                </div>

                <div class="detail-card">
                    <h3>üí∞ Resumen de Pago</h3>
                    <div class="detail-item">
                        <span class="detail-label">Subtotal:</span>
                        <span class="detail-value">$865 RD</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Delivery:</span>
                        <span class="detail-value">$85 RD</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Descuento:</span>
                        <span class="detail-value">-$50 RD</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">M√©todo de Pago:</span>
                        <span class="detail-value">üí≥ Tarjeta</span>
                    </div>
                    <div class="detail-item detail-total">
                        <span class="detail-label">Total:</span>
                        <span class="detail-value">$900 RD</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- DELIVERY TRACKING -->
        <section class="delivery-tracking animate-in">
            <div class="section-header">
                <h2>üöö Seguimiento de Entrega</h2>
                <div class="order-status">Estado: <strong style="color: var(--primary);">Preparando</strong></div>
            </div>

            <div class="tracking-steps">
                <div class="tracking-step step-completed">
                    <div class="step-icon">‚úÖ</div>
                    <div class="step-label">Confirmado</div>
                    <div class="step-time">14:30</div>
                </div>
                <div class="tracking-step step-active">
                    <div class="step-icon">üë®‚Äçüç≥</div>
                    <div class="step-label">Preparando</div>
                    <div class="step-time">En curso</div>
                </div>
                <div class="tracking-step">
                    <div class="step-icon">üöó</div>
                    <div class="step-label">En Camino</div>
                    <div class="step-time">--:--</div>
                </div>
                <div class="tracking-step">
                    <div class="step-icon">üè†</div>
                    <div class="step-label">Entregado</div>
                    <div class="step-time">--:--</div>
                </div>
            </div>

            <div class="estimated-time">
                ‚è∞ Tiempo estimado de entrega: <strong>30-45 minutos</strong><br>
                <small>Entrega estimada para las 15:15</small>
            </div>
        </section>

        <!-- ORDER ACTIONS -->
        <section class="order-actions animate-in">
            <div class="section-header">
                <h2>‚ö° Acciones R√°pidas</h2>
            </div>

            <div class="quick-actions">
                <a href="#" class="action-card" onclick="contactCommerce()">
                    <div class="action-icon">üí¨</div>
                    <div class="action-label">Contactar Comercio</div>
                </a>

                <a href="#" class="action-card" onclick="modifyOrder()">
                    <div class="action-icon">‚úèÔ∏è</div>
                    <div class="action-label">Modificar Pedido</div>
                </a>

                <a href="#" class="action-card" onclick="reorderItems()">
                    <div class="action-icon">üîÑ</div>
                    <div class="action-label">Volver a Pedir</div>
                </a>

                <a href="#" class="action-card" onclick="shareOrder()">
                    <div class="action-icon">üì§</div>
                    <div class="action-label">Compartir Pedido</div>
                </a>

                <a href="#" class="action-card" onclick="downloadReceipt()">
                    <div class="action-icon">üìÑ</div>
                    <div class="action-label">Descargar Recibo</div>
                </a>

                <a href="../info/support.html" class="action-card">
                    <div class="action-icon">üÜò</div>
                    <div class="action-label">Soporte</div>
                </a>
            </div>
        </section>

        <!-- SUPPORT SECTION -->
        <section class="support-section animate-in">
            <h3>¬øNecesitas ayuda con tu pedido?</h3>
            <p>Estamos aqu√≠ para ayudarte con cualquier pregunta o inconveniente</p>
            
            <div class="support-options">
                <div class="support-option">
                    <div class="support-icon">üí¨</div>
                    <div>
                        <strong>Chat en Vivo</strong>
                        <div style="font-size: 0.9rem; color: var(--gray);">Disponible 24/7</div>
                    </div>
                </div>
                
                <div class="support-option">
                    <div class="support-icon">üìû</div>
                    <div>
                        <strong>(809) 555-HELP</strong>
                        <div style="font-size: 0.9rem; color: var(--gray);">Lun-Vie 8AM-6PM</div>
                    </div>
                </div>
                
                <div class="support-option">
                    <div class="support-icon">üìß</div>
                    <div>
                        <strong>soporte@conectabarrio.com</strong>
                        <div style="font-size: 0.9rem; color: var(--gray);">Respuesta en 24h</div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        // DATOS DEL PEDIDO
        const orderData = {
            id: "CB-001234",
            date: "2024-10-16T14:30:00",
            status: "preparing",
            commerce: {
                id: 1,
                name: "Colmado San Miguel",
                category: "colmado",
                phone: "(809) 123-4567",
                image: "../assets/colmado-miguel.jpg",
                distance: "0.8 km"
            },
            delivery: {
                address: "Calle Principal #123, Apt 4B",
                neighborhood: "Zona Colonial",
                instructions: "Timbre 2 veces",
                contact: "Mar√≠a G. ‚Ä¢ (809) 555-0145",
                estimatedTime: "30-45 minutos",
                estimatedArrival: "15:15"
            },
            payment: {
                subtotal: 865,
                delivery: 85,
                discount: 50,
                total: 900,
                method: "Tarjeta"
            },
            products: [
                {
                    id: 1,
                    name: "Arroz Blanco 5kg",
                    price: 250,
                    quantity: 1,
                    image: "../assets/arroz-blanco.jpg"
                },
                {
                    id: 2,
                    name: "Aceite de Soja 1L",
                    price: 180,
                    quantity: 2,
                    image: "../assets/aceite-de-soja.jpg"
                },
                {
                    id: 3,
                    name: "Leche Entera 1L",
                    price: 85,
                    quantity: 3,
                    image: "../assets/lehce.jpg"
                }
            ]
        };

        document.addEventListener('DOMContentLoaded', function() {
            initOrderConfirmed();
            setupEventListeners();
            startOrderTracking();
        });

        function initOrderConfirmed() {
            // Actualizar datos din√°micos
            updateOrderData();
            
            // Mostrar animaci√≥n de confetti
            showConfetti();
            
            // Iniciar actualizaciones en tiempo real
            startRealTimeUpdates();
        }

        function setupEventListeners() {
            // Navegaci√≥n m√≥vil
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const navLinks = document.getElementById('navLinks');
            
            if (mobileMenuBtn && navLinks) {
                mobileMenuBtn.addEventListener('click', function() {
                    navLinks.classList.toggle('active');
                });
            }
        }

        function updateOrderData() {
            // Actualizar n√∫mero de pedido
            document.querySelector('.order-id').textContent = `#${orderData.id}`;
            
            // Actualizar fecha
            const orderDate = new Date(orderData.date);
            const options = { day: 'numeric', month: 'short', year: 'numeric', hour: '2-digit', minute: '2-digit' };
            document.querySelector('.order-date').textContent = `Realizado el ${orderDate.toLocaleDateString('es-ES', options)}`;
            
            // Actualizar tiempo estimado
            document.querySelector('.estimated-time strong').textContent = orderData.delivery.estimatedTime;
            document.querySelector('.estimated-time small').textContent = `Entrega estimada para las ${orderData.delivery.estimatedArrival}`;
        }

        function startOrderTracking() {
            // Simular actualizaci√≥n del estado del pedido
            setTimeout(() => {
                updateOrderStatus('on_the_way');
            }, 120000); // 2 minutos
            
            setTimeout(() => {
                updateOrderStatus('delivered');
            }, 300000); // 5 minutos
        }

        function updateOrderStatus(newStatus) {
            const statusMap = {
                'confirmed': { index: 0, label: 'Confirmado', icon: '‚úÖ' },
                'preparing': { index: 1, label: 'Preparando', icon: 'üë®‚Äçüç≥' },
                'on_the_way': { index: 2, label: 'En Camino', icon: 'üöó' },
                'delivered': { index: 3, label: 'Entregado', icon: 'üè†' }
            };
            
            const status = statusMap[newStatus];
            if (!status) return;
            
            // Actualizar todos los pasos
            const steps = document.querySelectorAll('.tracking-step');
            steps.forEach((step, index) => {
                step.classList.remove('step-active', 'step-completed');
                
                if (index < status.index) {
                    step.classList.add('step-completed');
                } else if (index === status.index) {
                    step.classList.add('step-active');
                }
            });
            
            // Actualizar estado general
            const statusText = document.querySelector('.order-status strong');
            statusText.textContent = status.label;
            statusText.style.color = newStatus === 'delivered' ? 'var(--success)' : 'var(--primary)';
            
            // Mostrar notificaci√≥n
            if (newStatus === 'on_the_way') {
                showNotification('¬°Tu pedido est√° en camino! üöó', 'info');
            } else if (newStatus === 'delivered') {
                showNotification('¬°Pedido entregado! üéâ', 'success');
                showConfetti();
            }
        }

        function startRealTimeUpdates() {
            // Simular actualizaciones en tiempo real
            setInterval(() => {
                // Actualizar tiempo estimado din√°micamente
                updateEstimatedTime();
            }, 30000); // Cada 30 segundos
        }

        function updateEstimatedTime() {
            // Simular actualizaci√≥n del tiempo estimado
            const estimatedElement = document.querySelector('.estimated-time small');
            const now = new Date();
            const deliveryTime = new Date();
            deliveryTime.setMinutes(now.getMinutes() + Math.floor(Math.random() * 10) + 25); // 25-35 minutos
            
            const timeString = deliveryTime.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
            estimatedElement.textContent = `Entrega estimada para las ${timeString}`;
        }

        // FUNCIONES DE INTERACCI√ìN
        function trackOrder() {
            showNotification('Abriendo rastreador de pedido...', 'info');
            // En una app real, esto abrir√≠a una p√°gina de tracking detallado
        }

        function contactCommerce() {
            const phone = orderData.commerce.phone;
            if (confirm(`¬øLlamar al comercio?\n${orderData.commerce.name}\n${phone}`)) {
                window.location.href = `tel:${phone}`;
            }
        }

        function modifyOrder() {
            showNotification('Redirigiendo para modificar pedido...', 'info');
            // En una app real, esto permitir√≠a modificar el pedido
        }

        function reorderItems() {
            if (confirm('¬øVolver a pedir los mismos productos?')) {
                // Agregar productos al carrito
                orderData.products.forEach(product => {
                    addToCart(product);
                });
                
                showNotification('Productos agregados al carrito', 'success');
                
                // Redirigir al carrito despu√©s de un momento
                setTimeout(() => {
                    window.location.href = 'cart.html';
                }, 1500);
            }
        }

        function shareOrder() {
            const orderUrl = `${window.location.origin}/user/order-detail.html?id=${orderData.id}`;
            const shareText = `¬°Hice un pedido en ConectaBarrio! üõí\nPedido: ${orderData.id}\nTotal: $${orderData.payment.total} RD`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Mi Pedido - ConectaBarrio',
                    text: shareText,
                    url: orderUrl
                });
            } else {
                navigator.clipboard.writeText(`${shareText}\n${orderUrl}`).then(() => {
                    showNotification('Informaci√≥n del pedido copiada al portapapeles', 'success');
                });
            }
        }

        function downloadReceipt() {
            showNotification('Generando y descargando recibo...', 'info');
            // En una app real, esto generar√≠a un PDF del recibo
            setTimeout(() => {
                showNotification('Recibo descargado exitosamente', 'success');
            }, 2000);
        }

        function addToCart(product) {
            // Simular agregar al carrito
            const cart = JSON.parse(localStorage.getItem('shoppingCart')) || [];
            const existingItem = cart.find(item => item.id === product.id);
            
            if (existingItem) {
                existingItem.quantity += product.quantity;
            } else {
                cart.push({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    image: product.image,
                    quantity: product.quantity,
                    commerceId: orderData.commerce.id,
                    commerceName: orderData.commerce.name
                });
            }
            
            localStorage.setItem('shoppingCart', JSON.stringify(cart));
        }

        function showConfetti() {
            // Efecto visual simple de confetti
            const confetti = document.createElement('div');
            confetti.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                z-index: 10000;
                background: transparent;
            `;
            
            // Agregar algunos elementos de confetti
            for (let i = 0; i < 50; i++) {
                const piece = document.createElement('div');
                piece.style.cssText = `
                    position: absolute;
                    width: 10px;
                    height: 10px;
                    background: ${getRandomColor()};
                    border-radius: 50%;
                    top: -10px;
                    left: ${Math.random() * 100}%;
                    animation: fall ${Math.random() * 3 + 2}s linear forwards;
                `;
                confetti.appendChild(piece);
            }
            
            document.body.appendChild(confetti);
            
            // Remover despu√©s de la animaci√≥n
            setTimeout(() => {
                confetti.remove();
            }, 3000);
            
            // Agregar estilos de animaci√≥n
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fall {
                    to {
                        transform: translateY(100vh) rotate(${Math.random() * 360}deg);
                        opacity: 0;
                    }
                }
            `;
            document.head.appendChild(style);
        }

        function getRandomColor() {
            const colors = ['#2E86AB', '#A23B72', '#F18F01', '#28a745', '#ffc107', '#dc3545'];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <span>${message}</span>
                <button onclick="this.parentElement.remove()">√ó</button>
            `;

            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: ${getNotificationColor(type)};
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 10000;
                display: flex;
                align-items: center;
                gap: 1rem;
                animation: slideInRight 0.3s ease;
                max-width: 400px;
            `;

            document.body.appendChild(notification);

            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 3000);
        }

        function getNotificationColor(type) {
            const colors = {
                success: '#28a745',
                error: '#dc3545',
                warning: '#ffc107',
                info: '#17a2b8'
            };
            return colors[type] || colors.info;
        }

        // Agregar estilos para notificaciones
        const notificationStyle = document.createElement('style');
        notificationStyle.textContent = `
            @keyframes slideInRight {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }

            .notification button {
                background: none;
                border: none;
                color: white;
                font-size: 1.2rem;
                cursor: pointer;
                padding: 0;
                width: 24px;
                height: 24px;
                display: flex;
                align-items: center;
                justify-content: center;
                opacity: 0.8;
            }

            .notification button:hover {
                opacity: 1;
            }
        `;
        document.head.appendChild(notificationStyle);
    </script>
    <script src="../js/main.js"></script>
</body>
</html>